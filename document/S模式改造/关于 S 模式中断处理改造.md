# 关于 S 模式中断处理改造

* 建议 fork 出一个 S MODE 改造分支
* 硬件环境处理部分在 `src/asm/trap.S` 中，m_trap_vector 进行机器模式的环境保存与恢复
* 在 `src/interrupt/trap.rs` 中是机器模式的中断处理
* 由于内核使用了浮点寄存器，所以 mstatus 的 FS 域被置位，对应的，sstatus 的 FS 位也该被置位

## 大致任务

* 机器模式接收了中断后立刻转发至 S 模式
* S 模式处理所有用户模式的中断、异常
* 为 S 模式设计新的中断处理、环境调用处理（可以参考已有的机器模式环境调用处理）